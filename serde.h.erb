#include <RH_RF95.h>
#ifndef serde_h
#define serde_h

class Packet {
  public:
    uint8_t magic_byte;

  <% fields.each do |field| %>
    <%= field.type %> <%= field.name %>;
  <% end %>
};

struct PacketArgs {
<% fields.each do |field| %>
  <%= field.type %> <%= field.name %>;
<% end %>
};

Packet buildPacket(PacketArgs args);

void serialize(uint8_t buf[], Packet packet);
bool isPacket(uint8_t buf[], int len);
Packet deserialize(uint8_t buf[]);

#endif