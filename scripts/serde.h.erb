#include <RH_RF95.h>
#ifndef serde_h
#define serde_h

class Packet {
  public:
    uint8_t magic_byte;

  <% fields.each do |field| %>
    <%= field.type %> <%= field.name %>;
  <% end %>
};

struct PacketArgs {
<% fields.each do |field| %>
  <%= field.type %> <%= field.name %>;
<% end %>
};

bool isPacket(uint8_t buf[], int len);
Packet buildPacket(PacketArgs args);

uint8_t byteFromLong(long num, int bytePosition);
long longFromBytes(uint8_t byte0, uint8_t byte1, uint8_t byte2, uint8_t byte3);

void serialize(uint8_t buf[], Packet packet);
Packet deserialize(uint8_t buf[]);

#endif